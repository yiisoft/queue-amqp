x-php: &php
  volumes:
    - ..:/app
  environment:
    XDEBUG_MODE: develop,debug,coverage
    XDEBUG_CONFIG: "client_host=host.docker.internal"
    PHP_IDE_CONFIG: serverName=yii-queue-amqp
  extra_hosts:
    - host.docker.internal:${DOCKER_HOST_IP:-172.17.0.1}

services:
  php80:
    <<: *php
    volumes:
      - ./runtime/.composer80:/root/.composer

  php81:
    <<: *php
    volumes:
      - ./runtime/.composer81:/root/.composer

  php82:
    <<: *php
    volumes:
      - ./runtime/.composer82:/root/.composer
